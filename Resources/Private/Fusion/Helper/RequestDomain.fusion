prototype(Carbon.Plausible:Helper.RequestMainDomain) < prototype(Neos.Fusion:Value) {
    value = ${BaseUri.getConfiguredBaseUriOrFallbackToCurrentRequest(request.httpRequest)}
    value.@process {
        withoutProtocol = ${String.pregMatch(value, '/\/\/([^\/]*)/')[1]}
        mainDomain = ${Array.join(Array.slice(String.split(value, '.'), -2), '.')}
    }
}
